import{b_ as A,x as r,A as G,bf as I}from"./index-0a7a3a0a.js";import{g as c}from"./common-6ebb879e.js";import{u as L}from"./site-cf9bf634.js";const h={add:"添加",update:"编辑"},M={cate:"分类",group:"分组",site:"网页"},_=A("modal",()=>{const o=r(!1),s=r("add"),a=r("site"),f=G(()=>h[s.value]+M[a.value]),e=L(),t=I({name:"",url:"",favicon:"",bgColor:""});function p(n,m,i=-1,l=-1){s.value=n,a.value=m,i!==-1&&e.setGroupIndex(i),l!==-1&&e.setSiteIndex(l),o.value=!0,n==="update"&&Object.assign(t,{site:()=>c(t,e.data[e.cateIndex].groupList[i].siteList[l]),group:()=>c(t,e.data[e.cateIndex].groupList[i]),cate:()=>c(t,e.data[e.cateIndex])}[m]())}let u=0;const v={add:{site:()=>e.addSite({id:u,...t}),group:()=>e.addGroup({id:u,name:t.name,siteList:[]}),cate:()=>e.addCate({id:u,name:t.name,groupList:[]})},update:{site:()=>e.updateSite({...t}),group:()=>e.updateGroup({name:t.name}),cate:()=>e.updateCate({name:t.name})}},g={site:()=>e.deleteSite(),group:()=>e.deleteGroup(),cate:()=>e.deleteCate()};function C(){o.value=!1}let d=!1;function S(){d||(d=!0,u=Date.now(),v[s.value][a.value](),o.value=!1,setTimeout(()=>d=!1,1e3))}function b(){g[a.value](),o.value=!1,a.value==="cate"&&e.cateIndex>0&&e.setCateIndex(e.cateIndex-1)}function x(){let n;for(n in t)t[n]=""}return{modalVisible:o,action:s,target:a,title:f,inputValues:t,showModal:p,handleCancel:C,handleCommit:S,handleDelete:b,clearInput:x}});export{_ as u};
