import{c6 as G,x as r,A as I,bl as L}from"./index-355bc263.js";import{g as c}from"./common-6ebb879e.js";import{u as b}from"./site-c1bd635e.js";const h={add:"添加",update:"编辑"},M={cate:"分类",group:"分组",site:"网页"},D=G("modal",()=>{const o=r(!1),s=r("add"),a=r("site"),p=I(()=>h[s.value]+M[a.value]),e=b(),t=L({name:"",url:"",favicon:"",bgColor:""});function f(n,m,i=-1,l=-1){s.value=n,a.value=m,i!==-1&&e.setGroupIndex(i),l!==-1&&e.setSiteIndex(l),o.value=!0,n==="update"&&Object.assign(t,{site:()=>c(t,e.data[e.cateIndex].groupList[i].siteList[l]),group:()=>c(t,e.data[e.cateIndex].groupList[i]),cate:()=>c(t,e.data[e.cateIndex])}[m]())}let u=0;const v={add:{site:()=>e.addSite({id:u,...t}),group:()=>e.addGroup({id:u,name:t.name,siteList:[]}),cate:()=>e.addCate({id:u,name:t.name,groupList:[]})},update:{site:()=>e.updateSite({...t}),group:()=>e.updateGroup({name:t.name}),cate:()=>e.updateCate({name:t.name})}},g={site:()=>e.deleteSite(),group:()=>e.deleteGroup(),cate:()=>e.deleteCate()};function C(){o.value=!1}let d=!1;function S(){d||(d=!0,u=Date.now(),v[s.value][a.value](),o.value=!1,setTimeout(()=>d=!1,1e3))}function x(){g[a.value](),o.value=!1,a.value==="cate"&&e.cateIndex>0&&e.setCateIndex(e.cateIndex-1)}function A(){let n;for(n in t)t[n]=""}return{modalVisible:o,action:s,target:a,title:p,inputValues:t,showModal:f,handleCancel:C,handleCommit:S,handleDelete:x,clearInput:A}});export{D as u};
